(self["webpackChunkcastmonkeys"]=self["webpackChunkcastmonkeys"]||[]).push([[561],{8561:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>H});var s=i(83673);const o={style:{display:"grid",margin:"40px 12px","grid-gap":"2rem","grid-template-columns":"repeat(auto-fit, minmax(300px, 1fr))"},class:"q-pa-md"};function n(t,e,i,n,a,m){const r=(0,s.up)("CommunityCard"),c=(0,s.up)("q-scroll-area"),l=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(l,{class:"bg-sub ",style:{width:"100%",height:"78vh"}},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{style:{height:"100%"},"thumb-style":t.thumbStyle},{default:(0,s.w5)((()=>[(0,s.Wm)("div",o,[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(t.communities,((t,e)=>((0,s.wg)(),(0,s.j4)(r,{key:e,indx:e,community:t},null,8,["indx","community"])))),128))])])),_:1},8,["thumb-style"])])),_:1})}var a=i(90515),m=i.n(a),r=i(55250),c=(i(90246),i(62323));const l={class:"absolute",size:"60px",style:{"margin-right":"5px",top:"0",left:"12px",transform:"translateY(-50%)",width:"95%"}},u={style:{display:"flex","align-items":"center","justify-content":"center","flex-direction":"row"}},d={class:"q-gutter-xs",style:{"justify-content":"end","padding-left":"-10px"}},p=(0,s.Uk)(" join "),h={class:"flex flex-center",style:{position:"relative",height:"100%",width:"100%"}},y={class:"flex flex-center",style:{"z-index":"4",overflow:"hidden"}},g={class:"row no-wrap items-center "},f={class:"col text-h6 ellipsis"},w=(0,s.Wm)("div",{class:"col-auto text-color-sub text-caption q-pt-md row no-wrap items-center"},null,-1),x=(0,s.Wm)("div",{class:"text-subtitle1"},null,-1),v={key:0};function W(t,e,i,o,n,a){const m=(0,s.up)("community-password"),r=(0,s.up)("q-img"),W=(0,s.up)("avatar"),b=(0,s.up)("q-space"),k=(0,s.up)("q-btn"),q=(0,s.up)("q-tooltip"),_=(0,s.up)("q-spinner-puff"),j=(0,s.up)("q-icon"),z=(0,s.up)("q-card-section"),S=(0,s.up)("q-scroll-area"),Z=(0,s.up)("q-card");return(0,s.wg)(),(0,s.j4)(s.HY,null,[(0,s.Wm)(m),(0,s.Wm)(Z,{class:"bg-main text-color-sub easein",style:{height:"496px",width:"100%",position:"relative",overflow:"hidden"}},{default:(0,s.w5)((()=>[(0,s.Wm)(r,{src:a.$bucket+a.setAsize(i.community.cover,360),key:"image",class:["image-transition","communityDesc",n.info?"height-sm":"height-md"]},null,8,["src","class"]),(0,s.Wm)(z,{key:"info"},{default:(0,s.w5)((()=>[(0,s.Wm)("div",l,[(0,s.Wm)("div",u,[(0,s.Wm)(W,{size:"50px",url:i.community.avatar},null,8,["url"]),(0,s.Wm)(b),(0,s.Wm)("div",d,[(0,s.Wm)(k,{icon:"info",size:"sm",round:"",color:"grey-9",onClick:e[1]||(e[1]=t=>n.info=!n.info),style:{"margin-top":"0px"}}),(0,s.Wm)(k,{icon:"chevron_right",size:"sm",round:"",color:"grey-9",onClick:e[2]||(e[2]=t=>a.join(i.community)),style:{"margin-top":"0px",overflow:"hidden"},loading:n.joinLoadState},{loading:(0,s.w5)((()=>[(0,s.Wm)("div",h,[(0,s.Wm)("div",y,[(0,s.Wm)(_,{color:"grey-3",thickness:3,size:"20px",style:{position:"absolute"}})])])])),default:(0,s.w5)((()=>[(0,s.Wm)(q,null,{default:(0,s.w5)((()=>[p,(0,s.Wm)("a",null,"$"+(0,c.zw)(i.community.alias),1)])),_:1})])),_:1},8,["loading"])])])]),(0,s.Wm)("div",g,[(0,s.Wm)("div",f,(0,c.zw)(i.community.alias),1),(0,s.Wm)(j,{class:"text-h6",name:"groups"}),(0,s.Uk)(" "+(0,c.zw)(i.community.peers.length),1)]),w])),_:1}),(0,s.Wm)(z,{class:"q-pt-none",key:"footer",style:{height:"80%","max-height":"360px"}},{default:(0,s.w5)((()=>[x,(0,s.Wm)("div",{class:["text-animate","text-caption","text-color-sub",n.info?"":"text-ellipsis"]},[n.info?(0,s.ry)("",!0):((0,s.wg)(),(0,s.j4)("span",v,(0,c.zw)(i.community.description),1)),n.info?((0,s.wg)(),(0,s.j4)(S,{key:1,style:{height:"355px"}},{default:(0,s.w5)((()=>[(0,s.Uk)((0,c.zw)(i.community.description),1)])),_:1})):(0,s.ry)("",!0)],2)])),_:1})])),_:1})],64)}i(65363);var b=i(64434);const k={props:["community","indx"],computed:m()(m()({},(0,r.Se)(["app"])),{},{$bucket(){return this.app.bucket}}),data(){return{info:!1,mode:"fill",joinLoadState:!1,password:""}},methods:m()(m()({},(0,r.nv)(["_toggle","_dialogs"])),{},{setAsize(t,e){return this.$setAvatarSize(t,e)},join(t){this.joinLoadState=!0,this.verify(t)&&this.request(t)},verify(t){this.$cm.post(`/community/${t._id}/verify`).then((t=>{t.data.passed?this.request(this.community):("public"==t.data.config.security.roomType&&this.request(this.community),"password"==t.data.config.security.roomType&&this._dialogs({communityPassword:{open:!0,data:this.community,actions:{save:this.submitPassword,cancel:this.cancelPassword}}}))}))},submitPassword(t){this.$cm.post(`/community/${this.community._id}/challenge`,{password:t}).then((t=>{t.data?this.request(this.community):(this.cancelPassword(),b.Z.create({message:"wrong password has been supplied",icon:"warning",color:"red",position:"bottom-right"}))}))},cancelPassword(){this.joinLoadState=!1,this._dialogs({communityPassword:{open:!1}})},request(t){this._dialogs({communityPassword:{open:!1}}),this.$cm.post(`/community/${t._id}/join`).then((t=>{this.goTo(t.data.community)}))},goTo(t){this.$router.replace(`/community/${t._id}`)}}),mounted(){}};var q=i(10151),_=i(24027),j=i(25589),z=i(62025),S=i(2165),Z=i(5363),$=i(8430),Q=i(24554),C=i(47704),P=i(7518),A=i.n(P);k.render=W;const T=k;A()(k,"components",{QCard:q.Z,QImg:_.Z,QCardSection:j.Z,QSpace:z.Z,QBtn:S.Z,QTooltip:Z.Z,QSpinnerPuff:$.Z,QIcon:Q.Z,QScrollArea:C.Z});var L=i(91368);const U={components:{CommunityCard:T},mixins:[L.Z],computed:m()({},(0,r.Se)(["communities"])),data(){return{}},methods:m()({},(0,r.Se)(["app"])),mounted(){}};var Y=i(24379);U.render=n;const H=U;A()(U,"components",{QPage:Y.Z,QScrollArea:C.Z})}}]);